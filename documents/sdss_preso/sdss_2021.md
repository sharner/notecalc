---
marp: true
theme: uncover
_class: invert
paginate: true
header: 
footer: SDSS 2021, Soren Harner, RC2AI
---

<style>
section {
  // background: blue;
  width: 1280px;
  height: 960px;
  font-size: 40px;
  padding: 40px;
}

header,
footer {
  position: absolute;
  left: 50px;
  right: 50px;
  height: 20px;
}

h2 {
  text-align: left;
}

</style>

# How Usability and Reproducibility in Software Improves Teaching and Research

Soren Harner, RC2AI

---

# Reproducibility

Given the same raw data, can you follow the steps and understand the assumptions of how the authors arrived at their conclusion?

---

# Why does it matter?

* Improves trust and transparency in science and beyond
* Promotes learning and building on others' work

---

# Implication in Research

* Public trust

---

# Implication in Education

* Interactive, hackable textbooks with linked data and sources
* Develop skills working with data

---

# Why is it hard?

* Present methodology and computation together
* Accessible but tamper proof data, code, and runtime
* Replicate the environment years later
* Not WYSIWYG (e.g. Excel), requires automation, not manual steps
* Cloud operations for data and heavy computation
* Trust chain for security and Identity
  
---

# Jim and team built

* [$RC^2$](https://github.com/mlilback/rc2SwiftClient) iOS and Mac Swift Client for Notebooks with remote computation
* [RSpark](https://github.com/jharner) a "Big Data" Docker-base compute environment with R, Spark, and other packages

---

# Introducing NoteCalc

* Focused on education, introducing reproducible practices early
* Author computational notebooks in VS Code in Markdown (not Jupyter)
* Students find, read, comment, clone, and share with mobile apps

---

# Notebook Authoring

* Unique in Github or Bitbucket URL per notebook
* Advanced authoring with VS Code extension, leveraging language servers, etc.
* Add style and interactivity with CSS, Javascript
* Declare runtimes and dependencies

---

# Notebook Readers

* Mobile and desktop apps geared to interactive documents
* Run and experiment with code chunks
* Clone, modify, comment, share

---

# Cloud Services

* User management and collaboration services
* Execute code chunks in R, Python, Stan, Julia, C++ in containers
* Tamper-proof versioned datasets in Apache Parquet
* Reproducible clusters with Docker and K8s
* GPUs for DNNs and heavy compute
* Spark for distributed computation
* Export data and images as needed

---

# Appendix

---

# Remove friction

1. Sign up
1. Install the App
1. Invite collaborators, which can be students
1. Author, find, critique, reuse
1. Share

---

# What's broken with notebooks

* Block structure, but REPL underneath

---

# Execution Graph

* Notebook defines a computation graph

Python Block -> R Block -> R Block

Env in Arrow

---

## Reproduciblity Requires

* Code and data are available
* Toolchain is open source
* Documentation is in plain text
* Data is immutable, inspectable, and described
* Code is versioned and literate
* Dependencies are declared and packaged

---

# More broadly, sharing

* [Wikipedia](https://www.wikipedia.org/)
* [Arxiv](https://arxiv.org/)
* [Papers with Code](https://paperswithcode.com/)
* [GitHub](https://github.com/)
* [DockerHub](https://github.com/)
* [Stack Overflow](https://stackoverflow.com/)

---

# Anti examples, more broadly

* Results cannot be replicated
* WYSIWYG documents (Word, Excel) on shared drives
* Sharing by copy, paste
* "It worked on my machine"
* Blackbox models and algorithms
* Automated disinformation
* Spoofing identity and fraud

---

## Authoring Data Science Reproducibly

* Documents built from versioned natural language, code, data, and infrastructure
* Readers can run it, interact with it, and build on it
* Machines can read and exchange it
* Leverage "the Cloud" for scalability
* Identity and assets are verifiable
* Meta authoring
  
---

## Meta Authoring Supports Usability

* Types and Schemas and "data about data"
* "IntelliSense" and language servers (e.g. VS Code Ecosystem)
* Linked data and entity linking
* Semantic discovery and recommentations (e.g. BERT and GPT2)

---

##

---




---

# Literate Programming

* Markdown, e.g. Knitr
* $\LaTeX$ and $\KaTeX$
* Funcitonal Programming
* Grammar of Graphics
* GraphViz
* Dataframes and Pipelines

---

# Language Servers

---

# Cloud Workloads

* Dockerfiles declare dependencies
* Container as a computational unit
* Kubernetes workloads
* GPUs for vertical scale
* Data in Cloud Storage
* CI/CD Pipelines from Git

---

<!-- _backgroundColor: aqua -->

# Introducing RC2AI

* Designed for Teaching
* Executable Markdown Documents
* VS Code Extension
* NoteCalc mobile app
* Supported by Cloud Services

---

# Interactive Data Analysis

* Brushing and Linked Data
* Interactive Controls
* Streamlit and Shiny

---

# Sharing and Collaboration

* Built on reproducibility
* Mobile devices
* Export snips
* Share links
* Comment and critique

---

# Markdown Notebook Editing

* Monoco Editor with CSS, Javascript
* R, Python language servers
* iOS, Android clients for phone and tablet
* MS Visual Code Extension for Linux, Mac, Windows Desktop

---

# Interactivity

* Brushing and linking in VegaLite
* Javascript in CSS

---

# Cloud Services

* Remote R, Python, Julia in cloud containers
* Big Data through Spark and Apache Arrow Ballista
* Run GPU containers for RAPIDS, PyTorch, Tensorflow
* Identity Management

---

# Reproducibility and Sharing

* Share notebooks and their cloud runtimes through App
* Github, Bitbucket integration
* Apache Arrow Datasets on Cloud Storage
* Publish documents, e.g. Dropbox

---

# Data Science Workflow

![](./images/sdss_2021_ideas/Data%20Science%20Workflow.png)

---

# Smart Notebooks

![](./images/sdss_2021_ideas/Making%20Notebooks%20Smart.png)

---

# Desktop Centric Workflow

![bg ](./images/sdss_2021_ideas/Desktop-Centric.png)


---

# Server Centric Workflow

![big fit](./images/sdss_2021_ideas/Server-Centric.png)

---

![bg left](./images/sdss_2021_ideas/Rethinking%20Notebooks%201.png)

# Reading and Sharing

* Notebook has a unique endpoint
* Monoco Editor (from VS Code)
* Native Application
* Manage a set of Notebooks
* Interactive controls for parameters
* Edit mode
* Share with collaborators

---

# Remote Computation

![w:573 h:408](./images/sdss_2021_ideas/Rethinking%20Notebooks.png)

---

```{graphviz}
digraph finite_state_machine {
    rankdir=LR;
    size="8,5"

    node [shape = doublecircle]; S;
    node [shape = point ]; qi

    node [shape = circle];
    qi -> S;
    S  -> q1 [ label = "a" ];
    S  -> S  [ label = "a" ];
    q1 -> S  [ label = "a" ];
    q1 -> q2 [ label = "ddb" ];
    q2 -> q1 [ label = "b" ];
    q2 -> q2 [ label = "b" ];
}
```
--- 

# Brian's Presentation and Book

[“Achieving Practical Reproducibility with Transparency and Accessibility” (DSSV 2020)](https://cartesianfaith.files.wordpress.com/2020/07/rowe-dssv-2020.pdf)


[Introduction to Reproducible
Science in R](https://cartesianfaith.files.wordpress.com/2018/11/rowe-introduction-to-reproducible-science-part-i-20181113.pdf)

---

Articles

[1,500 scientists lift the lid on reproducibility](https://www.nature.com/articles/533452a)

[What does research reproducibility mean?](https://stm.sciencemag.org/content/8/341/341ps12)

